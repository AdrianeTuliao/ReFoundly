<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReFoundly | Lost Items</title>
    <link rel="stylesheet" href="lost.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <header class="navbar">
        <h1>ReFoundly</h1>
        <div class="nav-icons">
            <a href="history.html" class="history-link">
                <i class="fas fa-history"></i>
            </a>
            <a href="message.html" class="history-link active-link">
                <i class="fas fa-comment-dots"></i>
            </a>
            <i class="fas fa-bell"></i>
            <i class="fas fa-user-circle"></i>
        </div>
    </header>

    <main class="container">
        <nav class="breadcrumb">
            <a href="dashboard.html">Home</a> &gt; <span>Lost Items</span>
        </nav>

        <section class="search-section">
            <div class="search-bar-pill">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search in Lost Items">
            </div>
        </section>

        <div class="items-grid">
            
            <div class="item-card">
                <div class="card-img-placeholder">Image</div>
                <div class="card-content">
                    <h3>Jonard 1</h3>
                    <hr class="title-line">
                    <span class="badge">Clothing</span>
                    <div class="item-details">
                        <p><strong>Description:</strong> Black and red</p>
                        <p><strong>Where Lost:</strong> Bonuan Gueset, near Jollibee</p>
                        <p><strong>Status:</strong> <span class="status-lost">Lost</span></p>
                        <p><strong>Owner:</strong> Hansalino Matalino</p>
                        <p><strong>Phone Number:</strong> 0912 345 6789</p>
                        <p><strong>Email:</strong> Hansalinasalino00_gmail.com</p>
                        <div class="post-time">
                            <small>Dated Posted: Jan 14, 2026</small><br>
                            <small>Time Posted: 4:39 PM</small>
                        </div>
                    </div>
                    <input type="text" class="comment-input" placeholder="Comment">
                </div>
            </div>

            <div class="item-card">
                <div class="card-img-placeholder">Image</div>
                <div class="card-content">
                    <h3>Rolex Watch</h3>
                    <hr class="title-line">
                    <span class="badge">Accessories</span>
                    <div class="item-details">
                        <p><strong>Description:</strong> Silver and gold</p>
                        <p><strong>Where Lost:</strong> Bonuan Gueset, near Mcdo</p>
                        <p><strong>Status:</strong> <span class="status-lost">Lost</span></p>
                        <p><strong>Owner:</strong> Mark Macaroro</p>
                        <p><strong>Phone Number:</strong> 0912 345 6789</p>
                        <p><strong>Email:</strong> Markyboy07_gmail.com</p>
                        <div class="post-time">
                            <small>Dated Posted: Dec 5, 2025</small><br>
                            <small>Time Posted: 8:43 PM</small>
                        </div>
                    </div>
                    <input type="text" class="comment-input" placeholder="Comment">
                </div>
            </div>

            <div class="item-card">
                <div class="card-img-placeholder">Image</div>
                <div class="card-content">
                    <h3>Black Wallet</h3>
                    <hr class="title-line">
                    <span class="badge">Wallet</span>
                    <div class="item-details">
                        <p><strong>Description:</strong> Leather, with IDs</p>
                        <p><strong>Where Lost:</strong> Barangay 1, Star Plaza</p>
                        <p><strong>Status:</strong> <span class="status-lost">Lost</span></p>
                        <p><strong>Owner:</strong> Juan Dela Cruz</p>
                        <p><strong>Phone Number:</strong> 0917 123 4567</p>
                        <p><strong>Email:</strong> juan_dc88@gmail.com</p>
                        <div class="post-time">
                            <small>Dated Posted: Dec 2, 2025</small><br>
                            <small>Time Posted: 10:15 AM</small>
                        </div>
                    </div>
                    <input type="text" class="comment-input" placeholder="Comment">
                </div>
            </div>

        </div>

        <div class="pagination">
            <button class="pag-btn">&lt;</button>
            <button class="pag-btn active">1</button>
            <button class="pag-btn">2</button>
            <button class="pag-btn">3</button>
            <span>..</span>
            <button class="pag-btn">10</button>
            <button class="pag-btn">&gt;</button>
        </div>
    </main>

    <footer>
        <div class="footer-links">
            <a href="#">About</a> | <a href="#">Contact</a> | <a href="#">Privacy Policy</a> | <a href="#">Terms</a>
        </div>
        <div class="socials">
            <i class="fab fa-facebook"></i>
            <i class="fab fa-instagram"></i>
            <i class="fab fa-linkedin"></i>
        </div>
        <p>Â© 2026 Digital Lost & Found Portal</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const grid = document.querySelector(".items-grid");
            const wrapper = document.querySelector(".main-wrapper");

            // Page Entrance Animations
            if (wrapper) setTimeout(() => wrapper.classList.add("fade-in"), 100);
            if (grid) setTimeout(() => grid.classList.add("rise-up"), 300);

            // Dynamic Content Loading
            loadLostItems();

            // Page Transition Logic
            const navLinks = document.querySelectorAll('.nav-icons a, .hero-actions a, .icon-link');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const targetHref = link.getAttribute('href');
                    if (link.hostname === window.location.hostname && targetHref !== "#") {
                        e.preventDefault();
                        if (grid) grid.classList.remove("rise-up");
                        if (wrapper) wrapper.classList.remove("fade-in");
                        setTimeout(() => window.location.href = link.href, 500);
                    }
                });
            });
        });

        // Fetch API Logic
        async function loadLostItems() {
            try {
                const response = await fetch('/api/items/lost');
                const items = await response.json();
                const grid = document.querySelector(".items-grid");

                grid.innerHTML = "";

                if (items.length === 0) {
                    grid.innerHTML = "<div style='grid-column: 1/-1; text-align:center; padding: 50px;'><h3>No lost items reported yet.</h3></div>";
                    return;
                }

                items.forEach(item => {
                    const card = document.createElement("div");
                    card.className = "item-card";

                    const imageContent = item.image_path 
                        ? `<img src="${item.image_path}" alt="${item.item_name}" style="width:100%; height:200px; object-fit:cover; border-radius: 8px 8px 0 0;">`
                        : `<div class="card-img-placeholder">No Image Provided</div>`;

                    card.innerHTML = `
                        ${imageContent}
                        <div class="card-content">
                            <h3>${item.item_name}</h3>
                            <hr class="title-line">
                            <span class="badge">${item.category}</span>
                            <div class="item-details">
                                <p><strong>Description:</strong> ${item.description || 'No description'}</p>
                                <p><strong>Where Lost:</strong> ${item.location}</p>
                                <p><strong>Status:</strong> <span class="status-lost">Lost</span></p>
                                <p><strong>Owner:</strong> ${item.contact_firstname} ${item.contact_lastname}</p>
                                <p><strong>Phone Number:</strong> ${item.contact_phone}</p>
                                <p><strong>Email:</strong> ${item.contact_email}</p>
                                <div class="post-time">
                                    <small>Date Lost: ${item.formattedDate}</small><br>
                                    <small>Time Lost: ${item.formattedTime}</small>
                                </div>
                            </div>
                            <input type="text" class="comment-input" placeholder="Type a lead or message..." onkeypress="handleComment(event, ${item.id})">
                        </div>
                    `;
                    grid.appendChild(card);
                });

                setTimeout(() => grid.classList.add("rise-up"), 100);
            } catch (error) {
                console.error("Error fetching lost items:", error);
            }
        }

        // Comment Interaction
        function handleComment(event, itemId) {
            if (event.key === 'Enter') {
                alert("Lead submitted for item ID: " + itemId + ". (Feature coming soon!)");
                event.target.value = "";
            }
        }
    </script>
</body>
</html>